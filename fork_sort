#include <stdio.h>
#include <unistd.h>
#include <sys/wait.h>

void sort(int a[], int n) {           // simple bubble sort
    for(int i=0;i<n-1;i++)
        for(int j=0;j<n-i-1;j++)
            if(a[j]>a[j+1]) {
                int t=a[j]; a[j]=a[j+1]; a[j+1]=t;
            }
}

int main() {
    int n; printf("Enter count: "); scanf("%d",&n);
    int a[n]; printf("Enter numbers: ");
    for(int i=0;i<n;i++) scanf("%d",&a[i]);

    pid_t pid=fork();

    if(pid==0) { // child
        printf("\nChild process (PID:%d, PPID:%d)\n",getpid(),getppid());
        sort(a,n);
        printf("Child sorted: ");
        for(int i=0;i<n;i++) printf("%d ",a[i]);
        printf("\nChild sleeping 5s to become ORPHAN...\n");
        sleep(5);
        printf("After 5s, new parent PID:%d\n",getppid());
    }
    else { // parent
        printf("\nParent process (PID:%d, Child PID:%d)\n",getpid(),pid);
        sort(a,n);
        printf("Parent sorted: ");   
        for(int i=0;i<n;i++) printf("%d ",a[i]);
        printf("\nParent sleeping 10s (child becomes ZOMBIE)...\n");
        sleep(10);
        wait(NULL);
        printf("Parent collected child, zombie cleared.\n");
    }
}
